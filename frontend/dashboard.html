<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
</head>
<body class="container mt-4">
<h2>Dashboard</h2>
<input type="text" id="search" class="form-control mb-3" placeholder="Search books">
<div class="row" id="book-list"></div>

<script>
function loadBooks(){
    $.post('../backend/books.php',{action:'list_books'},function(data){
        const books = JSON.parse(data);
        let html = '';
        books.forEach(book=>{
            html += `<div class="col-md-4 mb-3 book-card">
                <div class="card">
                  <img src="${book.cover || 'https://via.placeholder.com/150'}" class="card-img-top" height="200">
                  <div class="card-body">
                    <h5 class="card-title">${book.title}</h5>
                    <p>Author: ${book.author}</p>
                    <p>Price: ${book.price ? '$'+book.price : 'Free'}</p>
                  </div>
                </div>
              </div>`;
        });
        $('#book-list').html(html);
    });
}
loadBooks();
$('#search').on('keyup',function(){
    var val=$(this).val().toLowerCase();
    $('.book-card').filter(function(){
        $(this).toggle($(this).text().toLowerCase().indexOf(val)>-1)
    });
});
</script>
</body>
</html>